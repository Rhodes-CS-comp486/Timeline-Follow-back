<!DOCTYPE html>
<html lang="en">
<head>
     <!-- this is all for formatting the webpage
    it adds title to url, fonts from google api and css file
    the css files and api calls are generated with the help of codex-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div id="app"></div>

    <template id="base-layout">
        <div class="app-shell">
            <nav class="top-nav" aria-label="Primary">
                <a class="nav-btn" href="{{ url_for('home') }}">Home</a>
                <a class="nav-btn is-active" href="{{ url_for('calendar') }}">Calendar</a>
                <a class="nav-btn" href="#">Reports</a>
                <a class="nav-btn" href="#">Dashboard</a>
                <a class="nav-btn" href="#">Settings</a>
            </nav>

            <header class="page-header">
                <h1>Timeline Follow-Back Calendar</h1>
                <p class="subtitle">Track your alcohol and gambling behaviors</p>
            </header>

            <main class="app-main">
                <aside class="sidebar">
                    <div class="panel">
                        <div class="panel-title">Selected Day</div>
                        <div class="selected-date" id="selectedDateLabel">Pick a day</div>
                    </div>
                    <div class="panel">
                        <div class="panel-title">Quick Jump</div>
                        <div class="month-pill-list" id="monthQuickJump"></div>
                    </div>
                </aside>

                <section class="calendar-area">
                    <div class="calendar-card">
                        <div class="calendar-toolbar">
                            <div class="month-controls">
                                <button class="icon-btn" id="prevMonth" type="button" aria-label="Previous month">&larr;</button>
                                <div class="month-label" id="monthLabel" aria-live="polite"></div>
                                <button class="icon-btn" id="nextMonth" type="button" aria-label="Next month">&rarr;</button>
                            </div>
                        </div>

                        <div class="weekday-row">
                            <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>
                </section>
            </main>
        </div>

        <!-- This is the popup window to log events -->
        <div id="eventModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="panel-title" id="modalDateTitle">Log Activity</div>

                <form id="activityForm">
                    <div class="category-toggles">
                        <label>
                            <input type="checkbox" id="chkDrinking"> Drinking
                        </label>
                        <label>
                            <input type="checkbox" id="chkGambling"> Gambling
                        </label>
                    </div>

                    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">

                    <div id="drinkingSection">
                        <div class="form-group">
                            <label for="drinksInput">Drinks Consumed:</label>
                            <input type="text" inputmode="numeric" id="drinksInput" placeholder="how many drinks (e.g. 5)" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="drinksCost">Cost of drinks:</label>
                            <input type="text" inputmode="numeric" id="drinksCost" placeholder="how much money (e.g. $100)" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="drinkTrigger">Drink Trigger:</label>
                            <input type="text" inputmode="numeric" id="drinkTrigger" placeholder="smell, taste, social pressure" class="modal-input">
                        </div>
                    </div>

                    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">

                    <div id="gamblingSection">
                        <div class="form-group">
                            <label for="gamblingType">Gambling Type:</label>
                            <input type="text" inputmode="decimal" id="gamblingType" placeholder="e.g. sports betting, roulette, blackjack" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="moneyInputSpent">Money Gambled:</label>
                            <input type="text" inputmode="decimal" id="moneyInputSpent" placeholder="how much money (e.g. $100)" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="moneyInputEarned">Money Earned:</label>
                            <input type="text" inputmode="decimal" id="moneyInputEarned" placeholder="how much money (e.g. $100)" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="timeSpent">Time Spent:</label>
                            <input type="text" inputmode="decimal" id="timeSpent" placeholder="how much time (e.g. 1, 2, 10)" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="emotionBefore">Emotion Before:</label>
                            <input type="text" inputmode="decimal" id="emotionBefore" placeholder="e.g. sad, happy, anxious" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="emotionDuring">Emotion During:</label>
                            <input type="text" inputmode="decimal" id="emotionDuring" placeholder="e.g. sad, happy, anxious" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="emotionAfter">Emotion After:</label>
                            <input type="text" inputmode="decimal" id="emotionAfter" placeholder="e.g. sad, happy, anxious" class="modal-input">
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="nav-btn" id="closeModal">Cancel</button>
                        <button type="submit" class="nav-btn is-active">Save Entry</button>
                    </div>
                </form>
            </div>
        </div>
    </template>

    <template id="calendar-page"></template>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>