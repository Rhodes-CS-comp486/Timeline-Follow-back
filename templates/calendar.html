<!DOCTYPE html>
<html lang="en">
<head>
     <!-- this is all for formatting the webpage
    it adds title to url, fonts from google api and css file
    the css files and api calls are generated with the help of codex-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline Calendar</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div id="app"></div>

    <template id="base-layout">
        <div class="app-shell">
            <nav class="top-nav" aria-label="Primary">
                <a class="nav-btn" href="{{ url_for('home') }}">Home</a>
                <a class="nav-btn" href="{{ url_for('gambling_instructions') }}">Gambling Instructions</a>
                <a class="nav-btn" href="{{ url_for('alcohol_instructions') }}">Alcohol Instructions</a>
                <a class="nav-btn is-active" href="{{ url_for('calendar') }}">Calendar</a>
                <a class="nav-btn" href="#">Reports</a>
                <a class="nav-btn" href="#">Dashboard</a>
                <a class="nav-btn" href="#">Settings</a>
            </nav>

            <main class="app-main">
                <aside class="sidebar">
                    <div class="panel">
                        <div class="panel-title" id="selectedDateLabel">Pick a day</div>
                        <div class="entry-summary" id="entrySummary">
                            <p class="entry-empty">Select a date to view its entry.</p>
                        </div>
                    </div>
                    <div class="panel legend-panel">
                        <div class="panel-title">Legend</div>
                        <div class="legend-row">
                            <span class="legend-marker marker--drinking" aria-hidden="true"></span>
                            <span>Drinking logged</span>
                        </div>
                        <div class="legend-row">
                            <span class="legend-marker marker--gambling" aria-hidden="true"></span>
                            <span>Gambling logged</span>
                        </div>
                    </div>
                </aside>

                <section class="calendar-area">
                    <div class="calendar-card">
                        <div class="calendar-toolbar">
                            <div class="month-controls">
                                <button class="icon-btn" id="prevMonth" type="button" aria-label="Previous month">&larr;</button>
                                <div class="month-label" id="monthLabel" aria-live="polite"></div>
                                <button class="icon-btn" id="nextMonth" type="button" aria-label="Next month">&rarr;</button>
                            </div>
                        </div>

                        <div class="weekday-row">
                            <span>Sun</span><span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>
                </section>
            </main>
        </div>

        <!-- This is the popup window to log events -->
        <div id="eventModal" class="modal-overlay" style="display: none;">
            <div class="modal-content">
                <div class="panel-title" id="modalDateTitle">Log Activity</div>

                <form id="activityForm">
                    <div class="category-toggles">
                        <details class="type-dropdown">
                            <summary>Select activities</summary>
                            <div class="type-options">
                                <label>
                                    <input type="checkbox" id="chkDrinking"> Drinking
                                </label>
                                <label>
                                    <input type="checkbox" id="chkGambling"> Gambling
                                </label>
                            </div>
                        </details>
                    </div>

                    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">

                    <div id="drinkingSection">
                        <div class="form-group">
                            <label for="drinksInput">How many standard drinks did you consume? (Refer to the <a href="{{ url_for('alcohol_instructions') }}">Alcohol Instructions</a> page for what a standard drink is.)</label>
                            <input type="text" inputmode="numeric" id="drinksInput" placeholder="e.g. 0, 3, 5" class="modal-input">
                        </div>
                    </div>

                    <hr style="margin: 15px 0; border: 0; border-top: 1px solid #eee;">

                    <div id="gamblingSection">
                        <div class="form-group">
                            <label for="gamblingType">What type of gambling did you engage in?</label>
                            <input type="text" id="gamblingType" placeholder="e.g. sports betting, roulette, blackjack" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="timeSpent">How long were you gambling that day?</label>
                            <input type="text" id="timeSpent" placeholder="e.g. 1.5 hours" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="moneyIntended">How much did you intend to gamble with?</label>
                            <input type="text" inputmode="decimal" id="moneyIntended" placeholder="e.g. $100" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="moneyInputSpent">How much did you actually wager (not including wins)?</label>
                            <input type="text" inputmode="decimal" id="moneyInputSpent" placeholder="e.g. $300" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="moneyInputEarned">How much did you end up winning or losing?</label>
                            <input type="text" inputmode="decimal" id="moneyInputEarned" placeholder="e.g. +$50 or -$25" class="modal-input">
                        </div>
                        <div class="form-group">
                            <label for="drinksWhileGambling">How many drinks did you have while gambling?</label>
                            <input type="text" inputmode="numeric" id="drinksWhileGambling" placeholder="e.g. 0, 2, 5" class="modal-input">
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="nav-btn" id="closeModal">Cancel</button>
                        <button type="submit" class="nav-btn is-active">Save Entry</button>
                        <button type="button" class="nav-btn is-danger" id="deleteDrinking" disabled>Delete Drinking</button>
                        <button type="button" class="nav-btn is-danger" id="deleteGambling" disabled>Delete Gambling</button>
                    </div>
                </form>
            </div>
        </div>
    </template>

    <template id="calendar-page"></template>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
